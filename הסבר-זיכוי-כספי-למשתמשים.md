# מנגנון הצגת זיכוי כספי למשתמשים 💰

## מה השתנה?

עכשיו כאשר יש זיכוי כספי למשתמש, הוא יראה את זה **בצורה בולטת מאוד** בדף הבית שלו מיד עם כניסה לאתר!

## איך זה נראה? 🎨

המשתמש יראה כרטיס מיוחד וצבעוני עם:
- 🎁 אייקונים של מתנה וכסף
- **סכום הזיכוי בגדול ובולט** (בצבע לבן על רקע אדום כהה)
- הודעה ברורה: "יש לך זיכוי כספי!"
- הסבר: "הזיכוי ישמש עבור הטורניר הבא 🏆"
- אנימציות:
  - ⚡ אפקט נוצץ (shine)
  - 💓 דופק עדין (pulse)
  - 🎪 קפיצה של האייקונים (bounce)

## איפה זה מופיע? 📍

הכרטיס מופיע בדף הבית של השחקן (`PlayerDashboard`), ממש אחרי הכותרת הראשית ולפני הסטטיסטיקות.

## איך מנהל מעדכן זיכוי למשתמש? 👨‍💼

### אופציה 1: דרך AdminDashboard
1. כנס ל-Admin Dashboard
2. לחץ על לשונית "ניהול משתמשים"
3. מצא את המשתמש שאתה רוצה לזכות
4. לחץ על כפתור "💰 זיכוי"
5. הזן את סכום הזיכוי בשקלים
6. אשר את הפעולה

### אופציה 2: דרך AdminPanel
1. כנס ל-Admin Panel
2. עבור למשתמשים
3. לחץ על כפתור הזיכוי ליד המשתמש
4. הזן סכום בשקלים
5. אשר

## דוגמה לשימוש 📝

**תרחיש:** שחקן הגיע למקום השני וזכה ב-50 ₪. אתה רוצה לתת לו זיכוי עבור הטורניר הבא.

**פעולות:**
1. כמנהל על, כנס ל-Admin Dashboard
2. חפש את השחקן לפי מייל
3. לחץ "💰 זיכוי"
4. הזן: `50`
5. אשר

**תוצאה:**
- השחקן יראה בפעם הבאה שהוא נכנס לאתר כרטיס זהב גדול ובולט עם ההודעה:
  ```
  🎁💰
  יש לך זיכוי כספי!
  ₪ 50
  הזיכוי ישמש עבור הטורניר הבא 🏆
  ```

## קבצים ששונו 📁

### 1. `client/src/components/PlayerDashboardChampions.tsx`
**שורות 93-184**: נוסף כרטיס מיוחד שמציג את הזיכוי הכספי עם אנימציות ועיצוב מרשים

### מבנה הנתונים (כבר קיים)

**Database (users table):**
```sql
secondPrizeCredit REAL NOT NULL DEFAULT 0
```

**TypeScript Interface:**
```typescript
interface PlayerInfo {
  email: string;
  role: string;
  secondPrizeCredit: number;  // ← זה השדה שמציג את הזיכוי
}
```

**Server API Endpoint:**
```
POST /api/admin/users/:userId/credit
Body: { credit: number }
```

## בדיקה ✅

כדי לבדוק שהכל עובד:

1. כמנהל, תן זיכוי של 100 ₪ לשחקן כלשהו
2. התנתק מהמנהל
3. התחבר כשחקן שקיבל את הזיכוי
4. אמור לראות מיד בדף הבית כרטיס זהוב בולט עם סכום 100 ₪

## הערות חשובות 📌

- ✅ הכרטיס **מופיע רק** אם יש זיכוי גדול מ-0
- ✅ הכרטיס **responsive** - מתאים גם למובייל וגם למחשב
- ✅ הזיכוי נשמר ב-database ולא נמחק עד שהמנהל משנה אותו
- ✅ רק **מנהל על (Super Admin)** יכול לעדכן זיכוי

## שאלות נפוצות ❓

**ש: מה קורה אם אני משנה את הזיכוי ל-0?**  
ת: הכרטיס פשוט נעלם מדף הבית של המשתמש.

**ש: האם המשתמש מקבל התראה על הזיכוי?**  
ת: כרגע הוא רואה את זה רק בדף הבית. אפשר להוסיף התראה נוספת במערכת ההתראות אם צריך.

**ש: האם אפשר לתת זיכוי שלילי?**  
ת: לא, המערכת לא מאפשרת זיכוי שלילי (בדיקה בצד השרת).

**ש: איך אני מסיר זיכוי?**  
ת: פשוט ערוך את הזיכוי ל-0.

---

**עודכן:** 20/10/2025  
**גרסה:** 1.0

