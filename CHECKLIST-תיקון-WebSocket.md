# âœ… Checklist - ×ª×™×§×•×Ÿ WebSocket ×¢×œ k-rstudio.com

## ğŸ“‹ ×œ×¤× ×™ ×©××ª×—×™×œ×™×

- [ ] ×™×© ×œ×™ ×’×™×©×ª SSH ×œ×©×¨×ª (root ××• sudo)
- [ ] ×× ×™ ×™×•×“×¢ ××ª ×›×ª×•×‘×ª ×”×©×¨×ª: `k-rstudio.com`
- [ ] ×”×•×¨×“×ª×™ ××ª ×›×œ ×”×§×‘×¦×™× ××”×¤×¨×•×™×§×˜
- [ ] ×× ×™ ×‘×ª×™×§×™×™×” ×”× ×›×•× ×” ×©×œ ×”×¤×¨×•×™×§×˜

---

## ğŸ”§ ×ª×”×œ×™×š ×”×ª×™×§×•×Ÿ

### ×©×œ×‘ 1: ×”×›× ×”
- [ ] ×¤×ª×—×ª×™ PowerShell/Terminal ×‘×ª×™×§×™×™×ª ×”×¤×¨×•×™×§×˜
- [ ] ×‘×“×§×ª×™ ×©×”×§×•×‘×¥ `nginx-config-k-rstudio-ssl.txt` ×§×™×™×
- [ ] ×‘×“×§×ª×™ ×©×”×¡×§×¨×™×¤×˜ `update-nginx-ssl.ps1` ××• `update-nginx-ssl.sh` ×§×™×™×

### ×©×œ×‘ 2: ×”×¨×¦×ª ×¡×§×¨×™×¤×˜
- [ ] ×”×¤×¢×œ×ª×™ ××ª ×”×¡×§×¨×™×¤×˜:
  - Windows: `.\update-nginx-ssl.ps1`
  - Linux/macOS: `./update-nginx-ssl.sh`
- [ ] ×”×›× ×¡×ª×™ ×©× ××©×ª××© SSH
- [ ] ×”×›× ×¡×ª×™ ×›×ª×•×‘×ª ×©×¨×ª
- [ ] ××™×©×¨×ª×™ ×”××©×š (Y)

### ×©×œ×‘ 3: ×˜×™×¤×•×œ ×‘×©×’×™××•×ª (×× ×™×©)

#### ×× ×™×© ×©×’×™××ª SSL Certificate:
- [ ] ×”×ª×—×‘×¨×ª×™ ×œ×©×¨×ª: `ssh root@k-rstudio.com`
- [ ] ×”×¤×¢×œ×ª×™: `sudo certbot --nginx -d k-rstudio.com -d www.k-rstudio.com`
- [ ] ×¢× ×™×ª×™ ×¢×œ ×©××œ×•×ª Certbot:
  - [ ] Email: _________________
  - [ ] Terms: Yes
  - [ ] Redirect: Yes
- [ ] ×”×¤×¢×œ×ª×™ ×©×•×‘ ××ª ×”×¡×§×¨×™×¤×˜

#### ×× ×™×© ×©×’×™××ª Connection:
- [ ] ×‘×“×§×ª×™ ×—×™×‘×•×¨ SSH: `ssh root@k-rstudio.com`
- [ ] ×‘×“×§×ª×™ ×©×”Ö¾Firewall ×œ× ×—×•×¡×
- [ ] × ×™×¡×™×ª×™ ×©×•×‘

### ×©×œ×‘ 4: ××™××•×ª ×”×¦×œ×—×”
- [ ] ×”×¡×§×¨×™×¤×˜ ×”×¦×œ×™×— ×œ×œ× ×©×’×™××•×ª
- [ ] ×§×™×‘×œ×ª×™ ×”×•×“×¢×”: "ğŸ‰ ×”×ª×¦×•×¨×” ×¢×•×“×›× ×” ×‘×”×¦×œ×—×”!"

---

## ğŸ§ª ×‘×“×™×§×•×ª

### ×‘×“×™×§×” 1: ×¡×§×¨×™×¤×˜ ××•×˜×•××˜×™
- [ ] ×”×¤×¢×œ×ª×™: `.\test-websocket-ssl.ps1`
- [ ] ×›×œ ×”×‘×“×™×§×•×ª ×¢×‘×¨×• (âœ…):
  - [ ] HTTPS ×¢×•×‘×“
  - [ ] SSL Certificate ×ª×§×™×Ÿ
  - [ ] API Endpoint ×¢×•×‘×“
  - [ ] WebSocket Endpoint ×–××™×Ÿ

### ×‘×“×™×§×” 2: ×“×¤×“×¤×Ÿ
- [ ] ×¤×ª×—×ª×™: `https://www.k-rstudio.com`
- [ ] ×¤×ª×—×ª×™ Console (F12)
- [ ] ×¨××™×ª×™ ××ª ×”×”×•×“×¢×•×ª:
  - [ ] `ğŸ”Œ Connecting to WebSocket: wss://www.k-rstudio.com/presence`
  - [ ] `âœ… WebSocket connected successfully`
  - [ ] `ğŸ‘‹ Presence hello: X users`

### ×‘×“×™×§×” 3: ×‘×“×™×§×” ×•×™×–×•××œ×™×ª (××•×¤×¦×™×•× ×œ×™)
- [ ] ×¤×ª×—×ª×™ ××ª `test-websocket-connection.html` ×‘×“×¤×“×¤×Ÿ
- [ ] ×”×›× ×¡×ª×™ URL: `wss://www.k-rstudio.com/presence`
- [ ] ×œ×—×¦×ª×™ "×”×ª×—×‘×¨"
- [ ] ×¨××™×ª×™: "âœ… WebSocket ×”×ª×—×‘×¨ ×‘×”×¦×œ×—×”!"

---

## ğŸ” ×‘×“×™×§×ª ×©×¨×ª

### ×‘×“×™×§×” ×‘×©×¨×ª ×¢×¦××•
- [ ] ×”×ª×—×‘×¨×ª×™ ×œ×©×¨×ª: `ssh root@k-rstudio.com`
- [ ] ×‘×“×§×ª×™ Nginx: `sudo systemctl status nginx`
  - [ ] ×¡×˜×˜×•×¡: `active (running)` âœ…
- [ ] ×‘×“×§×ª×™ PM2: `pm2 status`
  - [ ] ×”×©×¨×ª `fc-masters` ×¨×¥ âœ…
  - [ ] ×¡×˜×˜×•×¡: `online` âœ…
- [ ] ×‘×“×§×ª×™ ×œ×•×’×™×: `pm2 logs fc-masters --lines 20`
  - [ ] ××™×Ÿ ×©×’×™××•×ª âœ…
  - [ ] ×¨×•××”: "âœ… Server started successfully"

### ×‘×“×™×§×ª CORS
- [ ] ×‘×“×§×ª×™ `.env` ×‘×©×¨×ª: `cat /var/www/fcmasters/server/.env | grep CORS`
- [ ] ×¨××™×ª×™: `CORS_ORIGIN=https://www.k-rstudio.com` âœ…
- [ ] ×× ×œ× × ×›×•×Ÿ - ×ª×™×§× ×ª×™:
  - [ ] `nano /var/www/fcmasters/server/.env`
  - [ ] ×¢×“×›× ×ª×™ ××ª `CORS_ORIGIN`
  - [ ] ×”×¤×¢×œ×ª×™ ××—×“×©: `pm2 restart fc-masters`

---

## âŒ ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª

### ×× WebSocket ×œ× ××ª×—×‘×¨ (1006)

#### ×‘×“×™×§×” 1: ×©×¨×ª Node.js
- [ ] `pm2 status` - ×”×× ×”×©×¨×ª ×¨×¥?
  - ×× ×œ×: `pm2 restart fc-masters`
- [ ] `pm2 logs fc-masters --lines 50` - ×™×© ×©×’×™××•×ª?

#### ×‘×“×™×§×” 2: Nginx
- [ ] `sudo nginx -t` - ×”×× ×”×ª×¦×•×¨×” ×ª×§×™× ×”?
  - ×× ×œ×: ×‘×“×•×§ ×©×’×™××•×ª ×•×ª×§×Ÿ
- [ ] `sudo tail -f /var/log/nginx/error.log` - ×™×© ×©×’×™××•×ª?

#### ×‘×“×™×§×” 3: SSL
- [ ] `sudo ls -la /etc/letsencrypt/live/k-rstudio.com/` - ×”×× ×§×™×™×?
  - ×× ×œ×: `sudo certbot --nginx -d k-rstudio.com -d www.k-rstudio.com`

#### ×‘×“×™×§×” 4: Port
- [ ] `sudo netstat -tlnp | grep 8787` - ×”×× ×”×©×¨×ª ×××–×™×Ÿ?
  - ×× ×œ×: ×”×©×¨×ª ×œ× ×¨×¥, ×”×¤×¢×œ ×¢× `pm2 start`

### ×× ×™×© ×©×’×™××ª Authentication (4401)
- [ ] ×–×” **×ª×§×™×Ÿ** ×× ××ª×” ×œ× ××—×•×‘×¨ ×œ××ª×¨
- [ ] WebSocket ×“×•×¨×© Cookie ×©×œ session
- [ ] ×¤×ª×¨×•×Ÿ:
  1. [ ] ×”×ª×—×‘×¨ ×œ××ª×¨ ×‘×˜××‘ ××—×“
  2. [ ] ×¤×ª×— Console ×‘×˜××‘ ××—×¨ ×‘××•×ª×• ×“×•××™×™×Ÿ
  3. [ ] ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨

### ×× ×™×© ×©×’×™××ª CORS
- [ ] ×‘×“×•×§ `.env`: `CORS_ORIGIN=https://www.k-rstudio.com`
- [ ] ×”×¤×¢×œ ××—×“×©: `pm2 restart fc-masters`

---

## ğŸ“Š Check List ×¡×•×¤×™

### ×ª×¦×•×¨×”
- [ ] SSL Certificate ××•×ª×§×Ÿ
- [ ] Nginx ××•×’×“×¨ ×¢× HTTPS (port 443)
- [ ] Nginx ××•×’×“×¨ ×¢× WebSocket headers
- [ ] ×”×©×¨×ª Node.js ×¨×¥ (pm2 status)
- [ ] CORS_ORIGIN × ×›×•×Ÿ ×‘Ö¾`.env`

### ×ª×•×¦××•×ª
- [ ] ×”×“×¤×“×¤×Ÿ ××¦×™×’ "âœ… WebSocket connected successfully"
- [ ] ××™×Ÿ ×©×’×™××•×ª ×‘Console (F12)
- [ ] ××¢×¨×›×ª ×”× ×•×›×—×•×ª (Presence) ×¢×•×‘×“×ª
- [ ] ××©×ª××©×™× ×¨×•××™× ××™ ××—×•×‘×¨ ×‘×–××Ÿ ×××ª

### ×’×™×‘×•×™×™×
- [ ] ×™×© ×œ×™ ×’×™×‘×•×™ ×©×œ ×”×ª×¦×•×¨×” ×”×™×©× ×”:
  - × ×ª×™×‘: `/etc/nginx/sites-available/fcmasters.backup-*`
- [ ] ×× ×™ ×™×•×“×¢ ××™×š ×œ×©×—×–×¨ ×× ×¦×¨×™×š:
  - `sudo cp /etc/nginx/sites-available/fcmasters.backup-* /etc/nginx/sites-available/fcmasters`
  - `sudo systemctl reload nginx`

---

## ğŸ‰ ×¡×™×•×

×× ×›×œ ×”×¡×¢×™×¤×™× ××¡×•×× ×™× âœ… - **××–×œ ×˜×•×‘!** ×”×ª×™×§×•×Ÿ ×”×•×©×œ× ×‘×”×¦×œ×—×”! ğŸŠ

### ××” ×”×‘×?
- [ ] ×©××¨×ª×™ ××ª ×”×§×‘×¦×™× ×”××œ×” ×œ××§×¨×” ×©××¦×˜×¨×š ××•×ª× ×©×•×‘
- [ ] ×ª×™×¢×“×ª×™ ××ª ×”×©×™× ×•×™×™× (××•×¤×¦×™×•× ×œ×™)
- [ ] ×¢×“×›× ×ª×™ ×¦×•×•×ª (×× ×¨×œ×•×•× ×˜×™)

---

## ğŸ“š ××¡××›×™× × ×•×¡×¤×™×

×× ×™×© ×‘×¢×™×•×ª ××• ×©××œ×•×ª:
- **××”×™×¨:** `×ª×™×§×•×Ÿ-××”×™×¨-WebSocket.md`
- **××¤×•×¨×˜:** `×ª×™×§×•×Ÿ-WebSocket-SSL.md`
- **README:** `README-×ª×™×§×•×Ÿ-WebSocket.md`
- **×¡×™×›×•×:** `×¡×™×›×•×-×§×‘×¦×™-×ª×™×§×•×Ÿ-WebSocket.md`

---

**×ª××¨×™×š ×ª×™×§×•×Ÿ:** ___/___/2025  
**×‘×•×¦×¢ ×¢×œ ×™×“×™:** _________________  
**×ª×•×¦××”:** âœ… ×”×¦×œ×—×” / âŒ × ×“×¨×© ×”××©×š

---

**×”×¢×¨×•×ª × ×•×¡×¤×•×ª:**
_________________________________________________
_________________________________________________
_________________________________________________

