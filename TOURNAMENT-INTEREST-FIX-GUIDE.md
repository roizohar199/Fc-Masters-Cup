# ğŸ”§ ×ª×™×§×•×Ÿ ×‘×¢×™×™×ª ×”×‘×¢×ª ×¢× ×™×™×Ÿ ×‘×˜×•×¨× ×™×¨

## ×”×‘×¢×™×”
××©×ª××©×™× ××‘×™×¢×™× ×¢× ×™×™×Ÿ ×‘×˜×•×¨× ×™×¨ (××§×‘×œ×™× ××™×™×œ) ××‘×œ ×”×¤×× ×œ ×”× ×™×”×•×œ ×œ× ××¦×™×’ ××ª ×”× ×ª×•× ×™× ×‘"×¡×˜×˜×•×¡ × ×¨×©××™× ×œ×˜×•×¨× ×™×¨".

## ×”×¡×™×‘×”
×”×‘×¢×™×” ×”×™×™×ª×” ×‘-endpoint `/api/admin/tournament-registrations` ×©×œ× ×—×™×¤×© × ×›×•×Ÿ ××ª ×˜×•×¨× ×™×¨ ×‘×¨×™×¨×ª ×”××—×“×œ (`default-tournament`) ×©×‘×• × ×©××¨×•×ª ×”×‘×¢×•×ª ×”×¢× ×™×™×Ÿ.

## ×”×ª×™×§×•×Ÿ ×©×‘×•×¦×¢

### 1. ×¢×“×›×•×Ÿ ×§×•×‘×¥ `server/src/routes/admin.ts`
```javascript
// ×œ×¤× ×™ ×”×ª×™×§×•×Ÿ - ×—×™×¤×© ×¨×§ ×˜×•×¨× ×™×¨×™× ×¢× status 'collecting'
let tournament = db.prepare(`
  SELECT * FROM tournaments 
  WHERE registrationStatus = 'collecting' 
  ORDER BY createdAt DESC 
  LIMIT 1
`).get() as any;

// ××—×¨×™ ×”×ª×™×§×•×Ÿ - ×—×™×¤×© ×’× ××ª ×˜×•×¨× ×™×¨ ×‘×¨×™×¨×ª ×”××—×“×œ
if (!tournament) {
  // ×× ××™×Ÿ ×˜×•×¨× ×™×¨ ×¤×¢×™×œ, × ×—×¤×© ××ª ×˜×•×¨× ×™×¨ ×‘×¨×™×¨×ª ×”××—×“×œ
  tournament = db.prepare(`
    SELECT * FROM tournaments 
    WHERE id = 'default-tournament'
    ORDER BY createdAt DESC 
    LIMIT 1
  `).get() as any;
}
```

### 2. ××™×š ×–×” ×¢×•×‘×“ ×¢×›×©×™×•
1. **××©×ª××© ××‘×™×¢ ×¢× ×™×™×Ÿ** â†’ × ×©××¨ ×‘-`tournament_registrations` ×¢× `tournamentId = 'default-tournament'`
2. **×× ×”×œ ××§×‘×œ ××™×™×œ** â†’ ×¢×œ ×”×‘×¢×ª ×”×¢× ×™×™×Ÿ ×”×—×“×©×”
3. **×¤×× ×œ ×”× ×™×”×•×œ** â†’ ××¦×™×’ ××ª ×›×œ ×”×‘×¢×•×ª ×”×¢× ×™×™×Ÿ ××˜×•×¨× ×™×¨ ×‘×¨×™×¨×ª ×”××—×“×œ

## ×‘×“×™×§×” ×©×”×ª×™×§×•×Ÿ ×¢×•×‘×“

### 1. ×”×¨×¥ ××ª ×”×©×¨×ª
```bash
npm run dev
```

### 2. ×‘×“×•×§ ××ª ×”×¤×× ×œ ×”× ×™×”×•×œ
- ×”×™×›× ×¡ ×œ×¤×× ×œ ×”× ×™×”×•×œ
- ×œ×—×¥ ×¢×œ "×¨×¢× ×Ÿ" ×œ×™×“ "×¡×˜×˜×•×¡ × ×¨×©××™× ×œ×˜×•×¨× ×™×¨"
- ×××•×¨ ×œ×¨××•×ª ××ª ××¡×¤×¨ ×”× ×¨×©××™×

### 3. ×‘×“×™×§×” ×¢× ×¡×§×¨×™×¤×˜
```bash
node test-tournament-interest-fix.mjs
```

## ××™×š ×œ×‘×“×•×§ ×©×”×‘×¢×™×” × ×¤×ª×¨×”

### âœ… ×¡×™×× ×™× ×©×”×ª×™×§×•×Ÿ ×¢×•×‘×“:
1. **×¤×× ×œ ×”× ×™×”×•×œ ××¦×™×’ × ×ª×•× ×™×** - ×¨×•××” ××ª ××¡×¤×¨ ×”× ×¨×©××™×
2. **×¨×©×™××ª × ×¨×©××™×** - ×¨×•××” ××ª ×©××•×ª ×”××©×ª××©×™× ×©× ×¨×©××•
3. **× ×ª×•× ×™× ××¢×•×“×›× ×™×** - ×›×¤×ª×•×¨ "×¨×¢× ×Ÿ" ×¢×•×‘×“

### âŒ ×× ×¢×“×™×™×Ÿ ×œ× ×¢×•×‘×“:
1. **×‘×“×•×§ ×©×”×©×¨×ª ×¨×¥** - `pm2 status`
2. **×‘×“×•×§ ×œ×•×’×™×** - `pm2 logs fc-masters`
3. **×‘×“×•×§ ××¡×“ × ×ª×•× ×™×** - ×™×© ×˜×•×¨× ×™×¨ ×¢× ID `default-tournament`
4. **×‘×“×•×§ ×”×¨×©××•×ª** - ×”××©×ª××© ×”×•× admin/superadmin

## ××‘× ×” ×”× ×ª×•× ×™×

### ×˜×‘×œ×ª `tournaments`
```sql
id: 'default-tournament'
title: '×˜×•×¨× ×™×¨ ×©×™×©×™ ×‘×¢×¨×‘'
registrationStatus: 'collecting'
registrationCapacity: 100
registrationMinPlayers: 16
```

### ×˜×‘×œ×ª `tournament_registrations`
```sql
tournamentId: 'default-tournament'
userId: [ID ×©×œ ×”××©×ª××©]
state: 'registered'
createdAt: [×ª××¨×™×š ×”×‘×¢×ª ×”×¢× ×™×™×Ÿ]
```

## ×”×¢×¨×•×ª ×—×©×•×‘×•×ª

- **×˜×•×¨× ×™×¨ ×‘×¨×™×¨×ª ××—×“×œ** × ×•×¦×¨ ××•×˜×•××˜×™×ª ×›×©××©×ª××© ××‘×™×¢ ×¢× ×™×™×Ÿ
- **×›×œ ×”×‘×¢×•×ª ×¢× ×™×™×Ÿ** × ×©××¨×•×ª ×‘××•×ª×• ×˜×•×¨× ×™×¨ ×‘×¨×™×¨×ª ××—×“×œ
- **×”×× ×”×œ ×™×›×•×œ ×œ×¤×ª×•×— ×˜×•×¨× ×™×¨ ×—×“×©** ××—×¨×™ ×©×™×© 16 ×©×—×§× ×™×
- **×”××¢×¨×›×ª ×©×•×œ×—×ª ××™×™×œ** ×¢×œ ×›×œ ×”×‘×¢×ª ×¢× ×™×™×Ÿ ×—×“×©×”

## ×¤×§×•×“×•×ª ×©×™××•×©×™×•×ª

```bash
# ×‘×“×™×§×ª ×¡×˜×˜×•×¡ ×”×©×¨×ª
pm2 status

# ×‘×“×™×§×ª ×œ×•×’×™×
pm2 logs fc-masters

# ×”×¤×¢×œ×” ××—×“×©
pm2 restart fc-masters

# ×‘×“×™×§×ª ××¡×“ × ×ª×•× ×™×
sqlite3 server/tournaments.sqlite "SELECT * FROM tournaments WHERE id='default-tournament';"
sqlite3 server/tournaments.sqlite "SELECT COUNT(*) FROM tournament_registrations WHERE tournamentId='default-tournament';"
```

×¢×›×©×™×• ×”×¤×× ×œ ×”× ×™×”×•×œ ×××•×¨ ×œ×”×¦×™×’ × ×›×•×Ÿ ××ª ×›×œ ×”×‘×¢×•×ª ×”×¢× ×™×™×Ÿ! ğŸ‰
