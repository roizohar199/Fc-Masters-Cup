# ğŸ¯ ××“×¨×™×š ×¤×©×•×˜ - ×ª×™×§×•×Ÿ WebSocket 1006

## ××” ×™×© ×œ×š ×¢×›×©×™×•?

2 ×§×‘×¦×™× ××¢×•×“×›× ×™× ×‘×§×•×“:
- âœ… `server/src/index.ts` - ×ª×•×§×Ÿ
- âœ… `server/src/presence.ts` - ×ª×•×§×Ÿ

**×–×” ×”×›×œ! ×©××¨ ×”×§×‘×¦×™× (MD, TXT, SH) ×–×” ×¨×§ ×ª×™×¢×•×“ ×¢×–×¨ - ×œ× ×—×™×™×‘×™× ××•×ª×.**

---

## ğŸš€ ××” ×œ×¢×©×•×ª ×¢×›×©×™×•?

### ×©×œ×‘ 1: ×”×¢×œ×” ×œ×’×™×˜ (×‘××—×©×‘ ×©×œ×š - Windows)

```powershell
git add server/src/index.ts server/src/presence.ts
git commit -m "Fix WebSocket 1006"
git push origin master
```

### ×©×œ×‘ 2: ×”×ª×—×‘×¨ ×œ×©×¨×ª

×”×ª×—×‘×¨ ×œ×©×¨×ª ×“×¨×š **PuTTY** ××• **SSH**:
- IP: `149.50.141.69`
- User: `root`
- Password: ×”×¡×™×¡××” ×©×œ×š

### ×©×œ×‘ 3: ×‘×©×¨×ª - ×”×¨×¥ ××ª ×”×¤×§×•×“×•×ª ×”××œ×”

```bash
# ×¢×‘×•×¨ ×œ×ª×™×§×™×™×”
cd /var/www/fcmasters

# ××©×•×š ××ª ×”×§×•×“ ×”×—×“×©
git pull origin master

# ×‘× ×” ××ª ×”×§×•×“
cd server
npm run build

# ×× ×”×›×œ ×¢×‘×“ - ×ª×¨××” ×”×•×“×¢×” ×™×¨×•×§×”

# ×”×¤×¢×œ ××—×“×© ××ª ×”×©×¨×ª
pm2 restart server

# ×‘×“×•×§ ×©×”×©×¨×ª ×¢×•×‘×“
pm2 logs server --lines 30
```

### ×©×œ×‘ 4: ×¢×“×›×Ÿ ××ª Nginx (×‘×©×¨×ª)

```bash
# ×’×‘×” ××ª ×”×ª×¦×•×¨×” ×”× ×•×›×—×™×ª
sudo cp /etc/nginx/sites-available/fcmasters /etc/nginx/sites-available/fcmasters.backup

# ×¤×ª×— ××ª ×§×•×‘×¥ ×”×ª×¦×•×¨×”
sudo nano /etc/nginx/sites-available/fcmasters
```

**×¢×›×©×™×• ×‘××—×©×‘ ×©×œ×š (Windows):**
- ×¤×ª×— ××ª ×”×§×•×‘×¥: `nginx-config-websocket-fixed.txt`
- **×”×¢×ª×§ ××ª ×›×œ ×”×ª×•×›×Ÿ**

**×—×–×•×¨ ×œ×©×¨×ª (PuTTY):**
- ×‘××¡×š ×”-nano, ×œ×—×¥ `Ctrl+K` ×›××” ×¤×¢××™× ×›×“×™ ×œ××—×•×§ ×”×›×œ
- ×œ×—×¥ ×œ×—×™×¦×” ×™×× ×™×ª ×›×“×™ ×œ×”×“×‘×™×§ ××ª ×”×ª×•×›×Ÿ ×”×—×“×©
- ×œ×—×¥ `Ctrl+X`, ××—×¨ ×›×š `Y`, ××—×¨ ×›×š `Enter` ×›×“×™ ×œ×©××•×¨

```bash
# ×‘×“×•×§ ×©×”×ª×¦×•×¨×” ×ª×§×™× ×”
sudo nginx -t

# ×× ×™×© ×”×•×“×¢×” "test is successful" - ××– ×˜×•×‘!
# ×¢×›×©×™×• reload
sudo systemctl reload nginx
```

### ×©×œ×‘ 5: ×‘×“×•×§ ×©×¢×•×‘×“

1. **×¤×ª×— ×“×¤×“×¤×Ÿ** â†’ https://www.k-rstudio.com
2. **×œ×—×¥ F12** â†’ ×¢×‘×•×¨ ×œ-Console
3. **×—×¤×© ×”×•×“×¢×•×ª:**
   - âœ… "WebSocket connected successfully"
   - âœ… "Presence hello: X users"

**×× ××ª×” ×¨×•××” ××ª ×–×” - ×”×¦×œ×—×ª! ğŸ‰**

---

## ğŸ“Œ ×œ×¡×™×›×•× - ××” ×¢×©×™× ×•?

1. âœ… ×ª×™×§× ×• ××ª ×”×§×•×“ ×‘-Node.js (server)
2. âœ… ×”×¢×œ×™× ×• ×œ×’×™×˜
3. âœ… ××©×›× ×• ×œ×©×¨×ª
4. âœ… ×‘× ×™× ×• ××—×“×©
5. âœ… ×¢×“×›× ×• ××ª Nginx
6. âœ… ×”×¤×¢×œ× ×• ××—×“×©

**×–×”×•! WebSocket ×××•×¨ ×œ×¢×‘×•×“ ×œ×œ× ×©×’×™××•×ª 1006.**

---

## â“ ×× ××©×”×• ×œ× ×¢×•×‘×“

### ×‘×¢×™×”: "git pull" × ×›×©×œ

```bash
# ××•×œ×™ ×™×© ×©×™× ×•×™×™× ××§×•××™×™× - ×ª×©××•×¨ ××•×ª×
git stash
git pull origin master
```

### ×‘×¢×™×”: "npm run build" × ×›×©×œ

```bash
# ×”×ª×§×Ÿ dependencies ××—×“×©
cd /var/www/fcmasters/server
npm install
npm run build
```

### ×‘×¢×™×”: Nginx test × ×›×©×œ

```bash
# ×”×—×–×¨ ××ª ×”×’×™×‘×•×™
sudo cp /etc/nginx/sites-available/fcmasters.backup /etc/nginx/sites-available/fcmasters
sudo nginx -t
```

### ×‘×¢×™×”: ×¢×“×™×™×Ÿ ×¨×•××” 1006

```bash
# ×‘×“×•×§ ×œ×•×’×™×
pm2 logs server --lines 100

# ×× ×¦×¨×™×š - ×”×¤×¢×œ ××—×“×© ×”×›×œ
pm2 restart server
sudo systemctl restart nginx
```

---

## ğŸ’¡ ×œ×’×‘×™ ×›×œ ×”×§×‘×¦×™× ×©×™×¦×¨×ª×™

- **MD, TXT** = ×ª×™×¢×•×“ ×¢×–×¨ (××•×¤×¦×™×•× ×œ×™ - ×œ×§×¨×™××” ×× ×¨×•×¦×” ×¤×¨×˜×™×)
- **PS1** = ×¡×§×¨×™×¤×˜ ××•×˜×•××˜×™ (××•×¤×¦×™×” ×œ×”×¨×™×¥ ×”×›×œ ××•×˜×•××˜×™×ª)
- **SH** = ×¡×§×¨×™×¤×˜ ×œ×©×¨×ª (××•×¤×¦×™×•× ×œ×™)

**××ª×” ×œ× ×—×™×™×‘ ×œ×”×©×ª××© ×‘×”×!** ×”××“×¨×™×š ×”×–×” ××¡×¤×™×§.

---

**×× ××ª×” ×¨×•×¦×” ×œ×¢×©×•×ª ×”×›×œ ××•×˜×•××˜×™×ª - ×¤×©×•×˜ ×”×¨×¥:**

```powershell
.\deploy-websocket-fix.ps1
```

**×–×”×•! ×‘×”×¦×œ×—×”! ğŸš€**

